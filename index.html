<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>amnesfubbia xx1</title>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@1,700&family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

<style>
body{background:#000;color:#fff;font-family:Inter;margin:0}
.no-scrollbar::-webkit-scrollbar{display:none}
.fixed-header-section{position:fixed;top:0;width:100%;z-index:100;background:#000;border-bottom:1px solid #1c1c1c}
.movie-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1px;padding-top:255px;padding-bottom:90px}
.post-card{aspect-ratio:2/3;background:#0a0a0a;position:relative;cursor:pointer}
.post-card img{width:100%;height:100%;object-fit:cover}
.badge-rating{position:absolute;top:6px;left:6px;font-size:9px;font-weight:900;background:#fff;color:#000;padding:2px 5px}
.badge-type{position:absolute;top:6px;right:6px;font-size:8px;font-weight:800;background:rgba(0,0,0,.7);border:1px solid rgba(255,255,255,.3);padding:2px 5px}
.modal-player{display:none;position:fixed;inset:0;background:#000;z-index:500;overflow-y:auto}
.bottom-nav{position:fixed;bottom:0;width:100%;background:#000;border-top:1px solid #1c1c1c;display:flex;justify-content:space-around;padding:12px 0;z-index:200}
.server-btn{padding:10px;border:1px solid #1c1c1c;border-radius:8px;font-size:10px;font-weight:800}
.server-btn.active-link{border:2px solid #fff}
</style>
</head>

<body>

<!-- HEADER -->
<div class="fixed-header-section">
<header class="flex justify-between items-center px-4 py-3">
<h1 class="font-bold italic text-lg">amnesfubbia <span class="opacity-40">xx1</span></h1>
<div class="flex gap-4">
<i class="fa-regular fa-heart"></i>
<i class="fa-regular fa-bookmark"></i>
</div>
</header>

<div class="px-4 pb-3">
<input id="searchInp" placeholder="Cari film, series, anime..."
class="w-full bg-zinc-900 rounded px-3 py-2 text-sm outline-none"
onkeydown="if(event.key==='Enter')searchAction()">
</div>

<div class="px-4 flex gap-2 pb-3">
<button class="pill active" onclick="setType('all',this)">Semua</button>
<button class="pill" onclick="setType('movie',this)">Film</button>
<button class="pill" onclick="setType('tv',this)">Series</button>
<button class="pill" onclick="setType('anime',this)">Anime</button>
</div>

<div class="px-4 flex gap-2 pb-3">
<button class="pill active" onclick="setSchedule('trending',this)">Trending</button>
<button class="pill" onclick="setSchedule('popular',this)">Populer</button>
</div>
</div>

<!-- GRID -->
<main id="feedGrid" class="movie-grid"></main>

<!-- MODAL -->
<div id="movieModal" class="modal-player">
<div class="max-w-xl mx-auto pb-40">

<div class="flex items-center px-4 h-14 border-b border-zinc-800 sticky top-0 bg-black">
<i class="fa-solid fa-chevron-left" onclick="closeModal()"></i>
<div id="mTitle" class="flex-grow text-center font-bold"></div>
</div>

<div class="aspect-video bg-black">
<iframe id="videoPlayer" class="w-full h-full"
sandbox="allow-scripts allow-same-origin allow-presentation"
allowfullscreen></iframe>
</div>

<div class="grid grid-cols-3 gap-2 px-4 mt-4">
<button class="server-btn active-link" onclick="playVid(mainServer,this)">Server 1</button>
<button class="server-btn" onclick="playVid(altServer,this)">Server 2</button>
<button class="server-btn" onclick="playVid(altServer2,this)">Server 3</button>
</div>

<div class="px-4 mt-4 text-sm text-zinc-300" id="mDesc"></div>

</div>
</div>

<!-- NAV -->
<nav class="bottom-nav">
<i class="fa-solid fa-house" onclick="location.reload()"></i>
<i class="fa-solid fa-magnifying-glass" onclick="document.getElementById('searchInp').focus()"></i>
<i class="fa-regular fa-user"></i>
</nav>

<script>
const API_KEY="bfa7df5310c9974f62f26c6789a8c00d";
let page=1,loading=false,type="all",schedule="trending",query="";
let mainServer="",altServer="",altServer2="";

window.onload=()=>loadFeed(true);

function setType(t,el){type=t;setActive(el);loadFeed(true)}
function setSchedule(s,el){schedule=s;setActive(el);loadFeed(true)}
function setActive(el){el.parentElement.querySelectorAll('button').forEach(b=>b.classList.remove('active'));el.classList.add('active')}

async function loadFeed(reset){
if(loading)return;
loading=true;
if(reset){page=1;feedGrid.innerHTML=""}

let url="";
if(schedule==="trending"){
url=`https://api.themoviedb.org/3/trending/${type==="tv"?"tv":"movie"}/day?api_key=${API_KEY}&page=${page}`;
}else{
url=`https://api.themoviedb.org/3/discover/${type==="tv"?"tv":"movie"}?api_key=${API_KEY}&sort_by=popularity.desc&page=${page}`;
}

if(query){
url=`https://api.themoviedb.org/3/search/multi?api_key=${API_KEY}&query=${encodeURIComponent(query)}&page=${page}`;
}

const res=await fetch(url);
const data=await res.json();
(data.results||[]).forEach(m=>{
if(!m.poster_path||m.media_type==="person")return;
const card=document.createElement("div");
card.className="post-card";
card.innerHTML=`
<div class="badge-rating">â˜… ${m.vote_average?.toFixed(1)||"0"}</div>
<div class="badge-type">${m.media_type==="tv"?"SERIES":"FILM"}</div>
<img loading="lazy" src="https://image.tmdb.org/t/p/w342${m.poster_path}">
`;
card.onclick=()=>openModal(m.id,m.media_type||"movie");
feedGrid.appendChild(card);
});

loading=false;
}

window.onscroll=()=>{
if(window.innerHeight+window.scrollY>document.body.offsetHeight-800&&!loading){
page
